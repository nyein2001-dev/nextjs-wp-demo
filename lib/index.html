<select id="contactType" name="contactType" class="form-control" required>
    <option value="">-- Please select --</option>
    <c:forEach var="option" items="${content.valueList.DropdownOption}">
        <option value="${option.value.OptionId}" 
            data-available="${option.value.IsAvailable}"
                data-include-radio="${option.value.IncludeRadioSection}"
                data-unavailable-text="${option.value.UnavailableText}"
                <c:if test="${option.value.OptionId eq param.contactType}">selected</c:if>>
            ${option.value.OptionName}
        </option>
    </c:forEach>
</select>

<c:forEach var="option" items="${content.valueList.DropdownOption}">
    <div id="${option.value.OptionId}" class="dropdown-view" style="display:none;">
        <p>${option.value.OptionName} View</p>
    </div>
</c:forEach>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const select = document.getElementById('contactType');
    const views = document.querySelectorAll('.dropdown-view');
    const unavailableText = document.getElementById('unavailable-text');

    function showSelectedView() {
        // Hide all views and the unavailable message
        views.forEach(view => view.style.display = 'none');
        unavailableText.style.display = 'none';
        unavailableText.textContent = '';

        const selectedOption = select.options[select.selectedIndex];
        const selectedValue = selectedOption.value;

        console.log('Selected value:', selectedValue);

        if (selectedValue) {
            const isAvailable = selectedOption.getAttribute('data-available') === 'true';
            const text = selectedOption.getAttribute('data-unavailable-text') || 'This option is unavailable.';

            console.log('Is available:', isAvailable);
            console.log('Unavailable text:', text);

            if (isAvailable) {
                const selectedView = document.getElementById(selectedValue);
                console.log('Selected view element:', selectedView);

                if (selectedView) {
                    selectedView.style.display = 'block';
                    console.log('Showing view for:', selectedValue);
                } else {
                    console.log('No view found for:', selectedValue);
                }
            } else {
                unavailableText.textContent = text;
                unavailableText.style.display = 'block';
                console.log('Showing unavailable text:', text);
            }
        } else {
            console.log('No value selected');
        }
    }

    // Initial load
    showSelectedView();

    // Change event
    select.addEventListener('change', showSelectedView);
});
</script>



<script>
  const radios = document.querySelectorAll('input[type="radio"]');

  radios.forEach(radio => {
    radio.addEventListener('change', () => {
      document.querySelectorAll('input[type="radio"]:checked').forEach(selectedRadio => {
        const radioId = selectedRadio.value;
        const dropdownId = selectedRadio.getAttribute('data-dropdown-id') || '';
        const selectedId = `${radioId}_${dropdownId}`;
        const selectedView = document.getElementById(selectedId);

        console.log("Radio ID: ", radioId);
        console.log("Dropdown ID: ", dropdownId);

        if (selectedView) {
          selectedView.style.display = 'block';
          console.log('Showing view for: ', selectedId);
        }
      });
    });
  });
</script>



