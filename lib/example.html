{ 
 "fullName": "test", 
 "mobile": "0356879768",  "nationalId": "HCM", 
 "referralAgent": "600000012",  "policyNumber": "76062238", }

 /lead/saveReferraInfo 

https://pru-api-nprd.prudential.com.vn/pruforce/lead-corporate/uat1


Environment URL
uat https://pru-api-nprd.prudential.com.vn/pruforce/lead-corporate/uat1

https://vn-lead-corporate-uat.aks-lb1-vnlife-uat-az2-
orch2h.pru.intranet.asia

prod https://pru-api-prod.prudential.com.vn/pruforce/lead-corporate/v1

Auth login
❖ API Description
- Purpose: This API is used to get token
- Method: POST
- URL: /auth/login


4. Save Referral Information
❖ API Description
- Purpose: This API is used to save information of referral agent
- Method: POST
- URL: /lead/saveReferraInfo

{
"fullName": "test",
"mobile": "0356879768",
"nationalId": "HCM",
"referralAgent": "600000012",
"policyNumber": "76062238",
}

Save Lead Referral
❖ API Description
- Purpose: This API is used to save lead which had referred by agent
- Method: POST
- URL: /lead/saveCorpWebReferral

{
"fullName": "viet Test",
"mobile": "0346786789",
"email": "test@gmail.com",
"referralId": "b5c53bff-5614-4f15-
9956-9a26ca715de7",
"referralAgent": "60000012",
"location": "HCM",
“messageDetails”: “remark string”,
“leadSource”:”test”
}

Check Identify Number
❖ API Description
- Purpose: This API is used to check identify of client was exist
- Method: POST
- URL: /lead/check-identify

{
“identifyNo:” 012005431233”
}


{
"referralId": "f4056f6c-dd22-4a64-
831a-3e53f1cd8e98",
"referralAgent": "600000012"
}

https://sgrasstvn4yt5w9.pru.intranet.asia:8443/opencms/vi/referee-form/index.html?uniqueId=ABC123&agentCode=001

https://pru-api-nprd.prudential.com.vn/pruforce/lead-corporate/uat1/auth/login


</html>

This form must be accessed through a valid referral link.


import java.net.URL;
import java.net.HttpURLConnection;
import java.io.OutputStreamWriter;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
import java.nio.charset.StandardCharsets;

// ... your existing imports ...

HttpURLConnection con = null;
OutputStreamWriter os = null;
BufferedReader in = null;

try {
    // Create URL and connection
    URL url = new URL("https://pru-api-nprd.prudentialthailand.co.th/pru-service/uat1/auth/login");
    con = (HttpURLConnection) url.openConnection();
    
    // Set connection properties
    con.setRequestProperty("Content-Type", "application/json");
    con.setRequestProperty("accept", "application/json");
    con.setRequestMethod("POST");
    con.setDoOutput(true);
    
    // CRITICAL: Set timeouts to prevent hanging
    con.setConnectTimeout(30000); // 30 seconds connection timeout
    con.setReadTimeout(60000);    // 60 seconds read timeout
    
    // Create JSON object with complete values
    JSONObject jsonObject = new JSONObject();
    jsonObject.put("password", "your_complete_password_here");
    jsonObject.put("username", "your_complete_username_here");
    
    // Convert to bytes and set content length
    byte[] bout = jsonObject.toString().getBytes(StandardCharsets.UTF_8);
    int length = bout.length;
    
    con.setFixedLengthStreamingMode(length);
    
    // Establish connection
    con.connect();
    
    // Send data
    os = new OutputStreamWriter(con.getOutputStream(), StandardCharsets.UTF_8);
    os.write(jsonObject.toString());
    os.flush();
    
    // Check response code first
    int responseCode = con.getResponseCode();
    System.out.println("Response Code: " + responseCode);
    
    // Read response
    StringBuffer content = new StringBuffer();
    
    if (responseCode >= 200 && responseCode < 300) {
        // Success response
        in = new BufferedReader(new InputStreamReader(con.getInputStream(), StandardCharsets.UTF_8));
    } else {
        // Error response
        in = new BufferedReader(new InputStreamReader(con.getErrorStream(), StandardCharsets.UTF_8));
    }
    
    String inputLine;
    while ((inputLine = in.readLine()) != null) {
        content.append(inputLine);
    }
    
    System.out.println("Response: " + content.toString());
    
} catch (java.net.SocketTimeoutException e) {
    System.err.println("Connection timeout: " + e.getMessage());
    // Handle timeout specifically
} catch (java.net.ConnectException e) {
    System.err.println("Connection refused: " + e.getMessage());
    // Handle connection refused
} catch (IOException e) {
    System.err.println("IO Exception: " + e.getMessage());
    // Handle other IO exceptions
} catch (Exception e) {
    System.err.println("General Exception: " + e.getMessage());
    e.printStackTrace();
} finally {
    // Clean up resources - CRITICAL for older Java versions
    if (os != null) {
        try { os.close(); } catch (IOException e) { /* ignore */ }
    }
    if (in != null) {
        try { in.close(); } catch (IOException e) { /* ignore */ }
    }
    if (con != null) {
        con.disconnect();
    }
}


